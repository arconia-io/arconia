= Ollama Dev Service
:service-name: ollama

A service providing an https://ollama.com[Ollama] model inference service for development and testing purposes.

It works with Spring Boot libraries that support Ollama, including:

* https://spring.io/projects/spring-ai[Spring AI]

[NOTE]
====
If a native Ollama connection is detected, for example, if you're already running the Ollama application on your laptop, the Ollama Dev Service will not be enabled.
====

== Dependencies

include::partial$dependencies.adoc[]

== Running the Application

include::partial$running-application.adoc[]

By default, when running the application in dev mode, the Dev Service will be shared across multiple applications.

== Configuring the Dev Service

You can configure the Dev Service via configuration properties.

|===
|Property |Default |Description

| `arconia.dev.services.{service-name}.enabled`
| `true`
| Whether the dev service is enabled.

| `arconia.dev.services.{service-name}.image-name`
| `ollama/ollama`
| Full name of the container image used in the dev service.

| `arconia.dev.services.{service-name}.environment`
| `{}`
| Environment variables to set in the service.

| `arconia.dev.services.{service-name}.network-aliases`
| `[]`
| Network aliases to assign to the dev service container.

| `arconia.dev.services.{service-name}.port`
| `0`
| Fixed port for exposing the Ollama inference service port to the host. When it's 0 (default), a random available port is assigned dynamically.

| `arconia.dev.services.{service-name}.resources`
| `[]`
| Resources from the classpath or host filesystem to copy into the container. They can be files or directories that will be copied to the specified destination path inside the container at startup and are immutable (read-only).

| `arconia.dev.services.{service-name}.shared`
| `true`
| Whether the dev service is shared among applications. Only applicable in dev mode.

| `arconia.dev.services.{service-name}.startup-timeout`
| `120s`
| Maximum waiting time for the service to start.

| `arconia.dev.services.{service-name}.ignore-native-service`
| `false`
| Whether to ignore an Ollama native service available on the host, but always use the container instead.
|===

include::partial$disabling-dev-service.adoc[]
